function shippingAddressHasChanged(n){var f=$("#toggle-billing-address"),t,u,r,i;f.prop("checked")&&(t=n,u=t.attr("name").indexOf(".")>0?t.attr("name").substr(18):t.attr("name").substr(17),n.prop("tagName").toLowerCase()=="input"?$('input[name="billingAddressVM.'+u+'"]').val(t.val()).trigger("change"):n.prop("tagName").toLowerCase()=="select"&&(u!="ListAddress"?(r=$('select[name="billingAddressVM.'+u+'"]'),i=t.val(),r.find('option[value="'+i+'"]').length==0&&(newOption=new Option(t.find("option[value="+i+"]").text(),i,!0,!0),r.append(newOption))):(r=$('select[name="billingAddressVMListAddress"]'),i="-1"),r.val(i),(i!="-1"||u!="ListAddress")&&r.trigger("change")))}var global_CopyingAddresses=!1,global_ChangingProgrammatically=!1;$(function(){var n=$("#address-form"),i=$(".ship-errors"),t=$("#toggle-billing-address");t.change(function(){$(".billing-address").toggle($(this).val());global_CopyingAddresses=!0;($(this).val()==="on"||$(this).val()==="true")&&($('input[name^="shippingAddressVM."]').each(function(){shippingAddressHasChanged($(this))}),shippingAddressHasChanged($('select[name="shippingAddressVMListAddress"]')),$('select[name^="shippingAddressVM."]').each(function(){shippingAddressHasChanged($(this))}));$(".billing-address").trigger("visibilityChanged");global_CopyingAddresses=!1});t.prop("checked")&&$(".billing-address").hide();$('input[name^="shippingAddressVM."]').change(function(){shippingAddressHasChanged($(this))});$('select[name="shippingAddressVMListAddress"]').change(function(){shippingAddressHasChanged($(this))});$('select[name^="shippingAddressVM."]').change(function(){shippingAddressHasChanged($(this))});"preventRequiredMark"in window&&preventRequiredMark||n.find(".required").after($("<span class='error-indicator' title='"+required+"'>*<\/span>"));n.submit(function(t){var u=!0,r,f=[];return n.find(".required").each(function(){var t=$(this),o,e;(t.is("input")||t.is("select"))&&!t.val()?(u=!1,o=t.attr("id"),e=n.find("label[for='"+o+"']").html(),t.addClass("required-error"),f.indexOf(e)===-1&&(i.show().append($("<div><\/div>").html(requiredFormat.replace("{0}",e))),f.push(e)),r||(r=this,r.focus())):t.removeClass("required-error")}),u?void 0:(t.preventDefault(),!1)})});