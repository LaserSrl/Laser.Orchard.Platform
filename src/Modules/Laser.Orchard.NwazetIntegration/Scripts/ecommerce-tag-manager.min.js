"use strict";window.ecommerceData=$.extend(!0,{},window.ecommerceData);window.ecommerceData.detail=$.extend(!0,{},window.ecommerceData.detail);window.ecommerceData.detail.products=window.ecommerceData.detail.products||[];window.ecommerceData.impressions=window.ecommerceData.impressions||[];window.ecommerceData.cart=$.extend(!0,{},window.ecommerceData.cart);window.ecommerceData.cart.products=window.ecommerceData.cart.products||[];window.ecommerceData.purchase=$.extend(!0,{},window.ecommerceData.purchase);window.ecommerceData.purchase.actionField=$.extend(!0,{},window.ecommerceData.purchase.actionField);window.ecommerceData.purchase.products=window.ecommerceData.purchase.products||[];window.ecommerceData.checkout=$.extend(!0,{},window.ecommerceData.checkout);window.ecommerceData.checkout.actionField=$.extend(!0,{},window.ecommerceData.checkout.actionField);window.ecommerceData.checkout.products=window.ecommerceData.checkout.products||[];window.GA4Data=$.extend(!0,{},window.GA4Data);window.GA4Data.event=window.GA4Data.event||"";window.GA4Data.ecommerce=$.extend(!0,{},window.GA4Data.ecommerce);window.GA4Data.ecommerce.items=window.GA4Data.ecommerce.items||[];window.GA4Data.ecommerce.transaction_id=window.GA4Data.ecommerce.transaction_id||"";window.GA4Data.ecommerce.affiliation=window.GA4Data.ecommerce.affiliation||"";window.GA4Data.ecommerce.value=window.GA4Data.ecommerce.value||"";window.GA4Data.ecommerce.tax=window.GA4Data.ecommerce.tax||"";window.GA4Data.ecommerce.shipping=window.GA4Data.ecommerce.shipping||"";window.GA4Data.ecommerce.currency=window.GA4Data.ecommerce.currency||"";window.GA4Data.ecommerce.coupon=window.GA4Data.ecommerce.coupon||"";window.GA4Data.ecommerce.shipping_tier=window.GA4Data.ecommerce.shipping_tier||"";window.GA4Data.ecommerce.payment_type=window.GA4Data.ecommerce.payment_type||"";$(function(){var t,n,i,r;window.ecommerceData=$.extend(!0,{},window.ecommerceData);window.ecommerceData.detail=$.extend(!0,{},window.ecommerceData.detail);window.ecommerceData.detail.products=window.ecommerceData.detail.products||[];window.ecommerceData.impressions=window.ecommerceData.impressions||[];window.ecommerceData.cart=$.extend(!0,{},window.ecommerceData.cart);window.ecommerceData.cart.products=window.ecommerceData.cart.products||[];window.ecommerceData.purchase=$.extend(!0,{},window.ecommerceData.purchase);window.ecommerceData.purchase.actionField=$.extend(!0,{},window.ecommerceData.purchase.actionField);window.ecommerceData.purchase.products=window.ecommerceData.purchase.products||[];window.ecommerceData.checkout=$.extend(!0,{},window.ecommerceData.checkout);window.ecommerceData.checkout.actionField=$.extend(!0,{},window.ecommerceData.checkout.actionField);window.ecommerceData.checkout.products=window.ecommerceData.checkout.products||[];window.GA4Data=$.extend(!0,{},window.GA4Data);window.GA4Data.event=window.GA4Data.event||"";window.GA4Data.ecommerce=$.extend(!0,{},window.GA4Data.ecommerce);window.GA4Data.ecommerce.items=window.GA4Data.ecommerce.items||[];window.GA4Data.ecommerce.transaction_id=window.GA4Data.ecommerce.transaction_id||"";window.GA4Data.ecommerce.affiliation=window.GA4Data.ecommerce.affiliation||"";window.GA4Data.ecommerce.value=window.GA4Data.ecommerce.value||"";window.GA4Data.ecommerce.tax=window.GA4Data.ecommerce.tax||"";window.GA4Data.ecommerce.shipping=window.GA4Data.ecommerce.shipping||"";window.GA4Data.ecommerce.currency=window.GA4Data.ecommerce.currency||"";window.GA4Data.ecommerce.coupon=window.GA4Data.ecommerce.coupon||"";window.GA4Data.ecommerce.shipping_tier=window.GA4Data.ecommerce.shipping_tier||"";window.GA4Data.ecommerce.payment_type=window.GA4Data.ecommerce.payment_type||"";t={};window.ecommerceData.impressions.length&&(t.impressions=window.ecommerceData.impressions);window.ecommerceData.detail.products.length&&(t.detail=window.ecommerceData.detail);$.isEmptyObject(window.ecommerceData.purchase)||$.isEmptyObject(window.ecommerceData.purchase.actionField)||(t.purchase=window.ecommerceData.purchase);$.isEmptyObject(window.ecommerceData.checkout)||$.isEmptyObject(window.ecommerceData.checkout.actionField)||(t.checkout=window.ecommerceData.checkout);n={};window.useGA4&&($.isEmptyObject(window.GA4Data)||window.GA4Data.event==""||$.isEmptyObject(window.GA4Data.ecommerce)||!window.GA4Data.ecommerce.items.length||(n.event=window.GA4Data.event,n.ecommerce=window.GA4Data.ecommerce,n.event=="purchase"?(n.ecommerce.transaction_id=window.GA4Data.ecommerce.transaction_id||"",n.ecommerce.affiliation=window.GA4Data.ecommerce.affiliation||"",n.ecommerce.value=window.GA4Data.ecommerce.value||"",n.ecommerce.tax=window.GA4Data.ecommerce.tax||"",n.ecommerce.shipping=window.GA4Data.ecommerce.shipping||"",n.ecommerce.currency=window.GA4Data.ecommerce.currency||"",n.ecommerce.coupon=window.GA4Data.ecommerce.coupon||""):n.event=="add_shipping_info"?(n.ecommerce.currency=window.GA4Data.ecommerce.currency||"",n.ecommerce.value=window.GA4Data.ecommerce.value||0,n.ecommerce.coupon=window.GA4Data.ecommerce.coupon||"",n.ecommerce.shipping_tier=window.GA4Data.ecommerce.shipping_tier||""):n.event=="add_payment_info"&&(n.ecommerce.currency=window.GA4Data.ecommerce.currency||"",n.ecommerce.value=window.GA4Data.ecommerce.value||0,n.ecommerce.coupon=window.GA4Data.ecommerce.coupon||"",n.ecommerce.payment_type=window.GA4Data.ecommerce.payment_type||"")));window.dataLayer=window.dataLayer||[];$.isEmptyObject(t)||(window.useGA4||window.useGTM&&!window.useUA?gtag({ecommerce:t}):window.useGTM&&window.useUA&&window.dataLayer.push({ecommerce:t}));(window.useGA4||window.useGTM&&!window.useUA)&&($.isEmptyObject(n)||gtag("event",n.event,n.ecommerce),window.ecommerceData.detail.products.length&&gtag("event","view_item",{currency:"EUR",items:[window.ecommerceData.detail.products]}),window.ecommerceData.impressions.length&&gtag("event","view_item_list",{item_list_id:"impressions",item_list_name:"impressions",items:window.ecommerceData.impressions}));i=function(n,t){for(var r,u={},i=0;i<n.length;i++)if(r=n[i],r.partId==t){u=r;break}return u};r=function(n){var r=$(n).find(".quantity"),o,u,f,c,s,e,h,t;if(r&&r.length){for(o=[],u=[],f=0;f<r.length;f++)if(c=$(r[f]).attr("data-cart-product-id"),s=$(r[f]).val(),c&&s){if(e=i(window.ecommerceData.cart.products,c),$.isEmptyObject(e))break;s!=e.quantity&&(h=s-e.quantity,t={},t=Object.assign(t,e),h>0?(t.quantity=h,o.push(t)):(t.quantity=-h,u.push(t)))}o.length&&(window.useGA4||window.useGTM&&!window.useUA?gtag("event","add_to_cart",{currency:"EUR",items:[productAdded]}):window.useGTM&&window.useUA&&window.dataLayer.push({event:"addToCart",ecommerce:{add:{products:o}}}));u.length&&(window.useGA4||window.useGTM&&!window.useUA?gtag("event","remove_from_cart",{currency:"EUR",items:[u]}):window.useGTM&&window.useUA&&window.dataLayer.push({event:"removeFromCart",ecommerce:{remove:{products:u}}}))}};$(document).on("nwazet.addedtocart","form.addtocart",function(n,t){var e=$(this).serializeArray().reduce(function(n,t){return n[t.name]=t.value,n},{}),u=e.id,r=i(window.ecommerceData.detail.products,u),f;($.isEmptyObject(r)&&(r=i(window.ecommerceData.impressions,u)),$.isEmptyObject(r))||(f=t.movedQuantity,r.quantity=f,window.useGA4||window.useGTM&&!window.useUA?gtag("event","add_to_cart",{currency:"EUR",items:[r]}):window.useGTM&&window.useGA&&window.dataLayer.push({event:"addToCart",ecommerce:{add:{products:[r]}}}))}).on("nwazet.removefromcart","form.addtocart",function(){var t=$(this).attr("data-cart-product-id"),n=i(window.ecommerceData.cart.products,t);$.isEmptyObject(n)||(n.quantity>0&&(window.useGA4||window.useGTM&&!window.useUA?gtag("event","remove_from_cart",{currency:"EUR",items:[n]}):window.useGTM&&window.useUA&&window.dataLayer.push({event:"removeFromCart",ecommerce:{remove:{products:[n]}}}),n.quantity=0),console.log("removefromcart"))}).on("change",".shoppingcart .quantity",function(){var r=$(this).attr("data-cart-product-id"),t=i(window.ecommerceData.cart.products,r),n;$.isEmptyObject(t)||(n=$(this).val(),t.currentQuantity=n,console.log("quantity changed to "+n))}).on("submit",".shopping-cart-container form",function(n){r(n.target)}).on("submit","form .shopping-cart-container",function(n){r(n.target)}).on("submit","form .shoppingcart",function(n){r(n.target)}).on("submit",".shoppingcart form",function(n){r(n.target)}).on("click","[data-analytics-product-id]",function(){var t=$(this).attr("data-analytics-product-id"),n=i(window.ecommerceData.impressions,t);$.isEmptyObject(n)&&(n=i(window.ecommerceData.cart.products,t),$.isEmptyObject(n))||(window.useGA4||window.useGTM&&!window.useUA?gtag("event","select_item",{item_list_id:"impressions",item_list_name:"impressions",items:[n]}):window.useGTM&&window.useUA&&window.dataLayer.push({event:"productClick",ecommerce:{click:{products:[n]}}}))}).on("submit",'form[data-analytics-form="review"]',function(n){if(window.useGA4||window.useGTM&&!window.useUA){var t=n.originalEvent.submitter.value;t&&gtag("event","add_payment_info",{currency:window.GA4Data.ecommerce.currency,value:window.GA4Data.ecommerce.value,coupon:window.GA4Data.ecommerce.coupon,payment_type:t,items:window.GA4Data.ecommerce.items||[]})}})});