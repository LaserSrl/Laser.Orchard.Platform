var WidgetsContainer;(function(){$(function(){var t=[],n;$(".add-widget").on("click",function(n){var u,t;n.preventDefault();var f=$(this).data("host-id"),i=$(this).parents("form:first"),e=$(this).parents("fieldset:first"),o=$("#hiddenSubmitSave")[0],r=document.createAttribute("name");r.value="submit.Save";o.setAttributeNode(r);u=e.find("input[name='submit.Save']");t=$(this).attr("href");f===0?i.attr("action",t):(u.val("submit.Save"),$("input[type='hidden'][name='returnUrl']").val(t));i.submit()});$("div.widgets").on("click","a.remove-widget",function(i){if(i.preventDefault(),confirm($(this).data("confirm"))){var r=$(this).parents("li:first"),u=r.data("widget-id");r.remove();t.push(u);$("input[name='removedWidgets']").val(JSON.stringify(t));n()}});n=function(){var i=$("input[name='widgetPlacement']"),n={zones:{}},t;$("div.widgets ul.widgets").each(function(){var t=$(this).data("zone");n.zones[t]={widgets:[]};$(this).find("li").each(function(){var i=$(this).data("widget-id");n.zones[t].widgets.push(i)})});t=JSON.stringify(n);i.val(t)};$("div.widgets ul.widgets").sortable({connectWith:"div.widgets ul.widgets",dropOnEmpty:!0,placeholder:"sortable-placeholder",receive:function(){n()},update:function(){n()}});$("#widgetsPlacement legend").expandoControl(function(n){return n.nextAll(".expando")},{collapse:!1,remember:!0,context:"widget-container"})})})(WidgetsContainer||(WidgetsContainer={}));