{"version":3,"file":"on-document-scroll.js","sources":["../../../src/js/plugins/util/on-document-scroll.js"],"sourcesContent":["import { v4 as uuidv4 } from 'uuid'\r\n\r\nlet ticking = false\r\nlet callbacks = []\r\n\r\nclass ScrollCallback {\r\n  constructor(id, callback) {\r\n    this.id = id\r\n    this._callback = callback\r\n  }\r\n\r\n  //Public\r\n  dispose() {\r\n    removeCallBack(this.id)\r\n  }\r\n\r\n  //Private\r\n  _execute(data) {\r\n    this._callback(data)\r\n  }\r\n}\r\n\r\nconst removeCallBack = (id) => {\r\n  callbacks = callbacks.filter((cb) => cb.id !== id)\r\n}\r\n\r\nconst onDocumentScroll = (callback) => {\r\n  if (!callbacks.length) {\r\n    document.addEventListener('scroll', (evt) => {\r\n      if (!ticking) {\r\n        window.requestAnimationFrame(() => {\r\n          callbacks.forEach((cbObj) => cbObj.cb._execute(evt))\r\n          ticking = false\r\n        })\r\n        ticking = true\r\n      }\r\n    })\r\n  }\r\n\r\n  if (typeof callback === 'function') {\r\n    const newCb = new ScrollCallback(uuidv4(), callback)\r\n    callbacks.push({\r\n      id: newCb.id,\r\n      cb: newCb,\r\n    })\r\n    return newCb\r\n  }\r\n\r\n  console.error('[onDocumentScroll] the provided data has to be of type function')\r\n  return null\r\n}\r\n\r\nexport default onDocumentScroll\r\n"],"names":["uuidv4"],"mappings":";;AAEA,IAAI,OAAO,GAAG,MAAK;AACnB,IAAI,SAAS,GAAG,GAAE;AAClB;AACA,MAAM,cAAc,CAAC;AACrB,EAAE,WAAW,CAAC,EAAE,EAAE,QAAQ,EAAE;AAC5B,IAAI,IAAI,CAAC,EAAE,GAAG,GAAE;AAChB,IAAI,IAAI,CAAC,SAAS,GAAG,SAAQ;AAC7B,GAAG;AACH;AACA;AACA,EAAE,OAAO,GAAG;AACZ,IAAI,cAAc,CAAC,IAAI,CAAC,EAAE,EAAC;AAC3B,GAAG;AACH;AACA;AACA,EAAE,QAAQ,CAAC,IAAI,EAAE;AACjB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,EAAC;AACxB,GAAG;AACH,CAAC;AACD;AACA,MAAM,cAAc,GAAG,CAAC,EAAE,KAAK;AAC/B,EAAE,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,EAAC;AACpD,EAAC;AACD;AACK,MAAC,gBAAgB,GAAG,CAAC,QAAQ,KAAK;AACvC,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;AACzB,IAAI,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC,GAAG,KAAK;AACjD,MAAM,IAAI,CAAC,OAAO,EAAE;AACpB,QAAQ,MAAM,CAAC,qBAAqB,CAAC,MAAM;AAC3C,UAAU,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAC;AAC9D,UAAU,OAAO,GAAG,MAAK;AACzB,SAAS,EAAC;AACV,QAAQ,OAAO,GAAG,KAAI;AACtB,OAAO;AACP,KAAK,EAAC;AACN,GAAG;AACH;AACA,EAAE,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;AACtC,IAAI,MAAM,KAAK,GAAG,IAAI,cAAc,CAACA,EAAM,EAAE,EAAE,QAAQ,EAAC;AACxD,IAAI,SAAS,CAAC,IAAI,CAAC;AACnB,MAAM,EAAE,EAAE,KAAK,CAAC,EAAE;AAClB,MAAM,EAAE,EAAE,KAAK;AACf,KAAK,EAAC;AACN,IAAI,OAAO,KAAK;AAChB,GAAG;AACH;AACA,EAAE,OAAO,CAAC,KAAK,CAAC,iEAAiE,EAAC;AAClF,EAAE,OAAO,IAAI;AACb;;;;"}