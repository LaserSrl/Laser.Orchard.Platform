{"version":3,"file":"tab.js","sources":["../../src/js/plugins/tab.js"],"sourcesContent":["import { default as BSTab } from 'bootstrap/js/src/tab'\r\nimport { defineJQueryPlugin, getNextActiveElement, isDisabled } from 'bootstrap/js/src/util/index.js'\r\nimport EventHandler from 'bootstrap/js/src/dom/event-handler.js'\r\nimport SelectorEngine from 'bootstrap/js/src/dom/selector-engine.js'\r\n\r\nconst DATA_KEY = 'bs.tab'\r\nconst EVENT_KEY = `.${DATA_KEY}`\r\n\r\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}`\r\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}`\r\n\r\nconst ARROW_LEFT_KEY = 'ArrowLeft'\r\nconst ARROW_RIGHT_KEY = 'ArrowRight'\r\nconst ARROW_UP_KEY = 'ArrowUp'\r\nconst ARROW_DOWN_KEY = 'ArrowDown'\r\nconst ENTER_KEY = 'Enter'\r\nconst SPACE_BAR_KEY = ' '\r\n\r\nconst CLASS_NAME_ACTIVE = 'active'\r\n\r\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"tab\"], [data-bs-toggle=\"pill\"], [data-bs-toggle=\"list\"]' // todo:v6: could be only `tab`\r\n\r\nconst SELECTOR_DATA_TOGGLE_ACTIVE = `.${CLASS_NAME_ACTIVE}[data-bs-toggle=\"tab\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"pill\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"list\"]`\r\n\r\nclass Tab extends BSTab {\r\n  constructor(element) {\r\n    super(element)\r\n  }\r\n\r\n  _keydown(event) {\r\n    if (![ARROW_LEFT_KEY, ARROW_RIGHT_KEY, ARROW_UP_KEY, ARROW_DOWN_KEY, ENTER_KEY, SPACE_BAR_KEY].includes(event.key)) {\r\n      return\r\n    }\r\n\r\n    event.stopPropagation() // stopPropagation/preventDefault both added to support up/down keys without scrolling the page\r\n    event.preventDefault()\r\n\r\n    if (event.key === ENTER_KEY || event.key === SPACE_BAR_KEY) {\r\n      Tab.getOrCreateInstance(event.target).show()\r\n      return\r\n    }\r\n\r\n    const isNext = [ARROW_RIGHT_KEY, ARROW_DOWN_KEY].includes(event.key)\r\n    const nextActiveElement = getNextActiveElement(\r\n      this._getChildren().filter((element) => !isDisabled(element)),\r\n      event.target,\r\n      isNext,\r\n      true\r\n    )\r\n    if (nextActiveElement) {\r\n      nextActiveElement.focus({ preventScroll: true })\r\n    }\r\n  }\r\n}\r\n\r\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\r\n  if (['A', 'AREA'].includes(this.tagName)) {\r\n    event.preventDefault()\r\n  }\r\n\r\n  if (isDisabled(this)) {\r\n    return\r\n  }\r\n\r\n  const t = Tab.getOrCreateInstance(this)\r\n  t.dispose()\r\n  Tab.getOrCreateInstance(this).show()\r\n})\r\n\r\n/**\r\n * Initialize on focus\r\n */\r\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\r\n  for (const element of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE)) {\r\n    const t = Tab.getOrCreateInstance(element)\r\n    t.dispose()\r\n    Tab.getOrCreateInstance(element)\r\n  }\r\n})\r\n/**\r\n * jQuery\r\n */\r\n\r\ndefineJQueryPlugin(Tab)\r\n\r\nexport default Tab\r\n"],"names":[],"mappings":"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"}