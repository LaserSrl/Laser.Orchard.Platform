{"version":3,"file":"backToTop.js","sources":["../../src/js/plugins/backToTop.js"],"sourcesContent":["import BaseComponent from 'bootstrap/js/src/base-component.js'\r\n\r\nimport EventHandler from 'bootstrap/js/src/dom/event-handler'\r\nimport SelectorEngine from 'bootstrap/js/src/dom/selector-engine'\r\nimport Manipulator from 'bootstrap/js/src/dom/manipulator'\r\n\r\nimport onDocumentScroll from './util/on-document-scroll'\r\nimport { documentScrollTo } from './util/tween'\r\n\r\nconst NAME = 'backtotop'\r\nconst DATA_KEY = 'bs.backtotop'\r\nconst EVENT_KEY = `.${DATA_KEY}`\r\n//const DATA_API_KEY = '.data-api'\r\n\r\n//const EVENT_SCROLL = `scroll${EVENT_KEY}`\r\nconst EVENT_CLICK = `click${EVENT_KEY}`\r\n\r\nconst CLASS_NAME_SHOW = 'back-to-top-show'\r\n\r\nconst SELECTOR_TOGGLE = '[data-bs-toggle=\"backtotop\"]'\r\n\r\nconst Default = {\r\n  positionTop: 0,\r\n  scrollLimit: 100,\r\n  duration: 800,\r\n  easing: 'easeInOutSine',\r\n}\r\n\r\nclass BackToTop extends BaseComponent {\r\n  constructor(element, config) {\r\n    super(element)\r\n\r\n    this._config = this._getConfig(config)\r\n    this._scrollCb = null\r\n    this._isAnim = false\r\n    this._prevScrollBehavior = ''\r\n\r\n    this._bindEvents()\r\n  }\r\n\r\n  // Getters\r\n\r\n  static get NAME() {\r\n    return NAME\r\n  }\r\n\r\n  // Public\r\n  show() {\r\n    if (!this._element.classList.contains(CLASS_NAME_SHOW)) {\r\n      this._element.classList.add(CLASS_NAME_SHOW)\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    if (this._element.classList.contains(CLASS_NAME_SHOW)) {\r\n      this._element.classList.remove(CLASS_NAME_SHOW)\r\n    }\r\n  }\r\n\r\n  toggleShow() {\r\n    if (document.scrollingElement.scrollTop > this._config.scrollLimit) {\r\n      this.show()\r\n    } else {\r\n      this.hide()\r\n    }\r\n  }\r\n\r\n  scrollToTop() {\r\n    if (!this._isAnim) {\r\n      this._isAnim = true\r\n      documentScrollTo(this._config.positionTop, {\r\n        duration: this._config.duration,\r\n        easing: this._config.easing,\r\n        complete: () => {\r\n          this._isAnim = false\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  dispose() {\r\n    if (this._scrollCb) {\r\n      this._scrollCb.dispose()\r\n    }\r\n\r\n    super.dispose()\r\n  }\r\n\r\n  // Private\r\n  _getConfig(config) {\r\n    config = {\r\n      ...Default,\r\n      ...Manipulator.getDataAttributes(this._element),\r\n      ...(typeof config === 'object' ? config : {}),\r\n    }\r\n    return config\r\n  }\r\n\r\n  _bindEvents() {\r\n    this._scrollCb = onDocumentScroll(() => this.toggleShow())\r\n\r\n    EventHandler.on(this._element, EVENT_CLICK, (evt) => {\r\n      evt.preventDefault()\r\n      this.scrollToTop()\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * ------------------------------------------------------------------------\r\n * Data Api implementation\r\n * ------------------------------------------------------------------------\r\n */\r\n/*const toggles = SelectorEngine.find(SELECTOR_TOGGLE)\r\ntoggles.forEach((toggle) => {\r\n  BackToTop.getOrCreateInstance(toggle)\r\n})*/\r\n\r\nonDocumentScroll(() => {\r\n  const toggles = SelectorEngine.find(SELECTOR_TOGGLE)\r\n  toggles.map((toggle) => {\r\n    BackToTop.getOrCreateInstance(toggle)\r\n  })\r\n})\r\n\r\nexport default BackToTop\r\n"],"names":[],"mappings":"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"}