{"version":3,"file":"progress-donut.js","sources":["../../src/js/plugins/progress-donut.js"],"sourcesContent":["import ProgressBar from 'progressbar.js'\r\nimport BaseComponent from 'bootstrap/js/src/base-component.js'\r\n\r\n//import EventHandler from 'bootstrap/js/src/dom/event-handler'\r\nimport SelectorEngine from 'bootstrap/js/src/dom/selector-engine'\r\nimport Manipulator from 'bootstrap/js/src/dom/manipulator'\r\n\r\nconst NAME = 'progressdonut'\r\n//const DATA_KEY = 'bs.progressdonut'\r\n//const EVENT_KEY = `.${DATA_KEY}`\r\n//const DATA_API_KEY = '.data-api'\r\n\r\nconst SELECTOR_DONUT = '[data-bs-progress-donut]'\r\n\r\nconst Default = {\r\n  color: '#5C6F82',\r\n  trailColor: '#D9DADB',\r\n  // This has to be the same size as the maximum width to\r\n  // prevent clipping\r\n  strokeWidth: 24,\r\n  trailWidth: 12,\r\n  easing: 'easeInOut',\r\n  duration: 1400,\r\n  text: {\r\n    autoStyleContainer: false,\r\n  },\r\n  animate: true,\r\n  value: 0,\r\n  //from: { color: '#aaa', width: 1 },\r\n  //to: { color: '#333', width: 4 },\r\n}\r\n\r\nclass ProgressDonut extends BaseComponent {\r\n  constructor(element, config) {\r\n    super(element)\r\n\r\n    this._config = this._getConfig(config)\r\n    this._bar = null\r\n\r\n    this._init()\r\n  }\r\n\r\n  // Getters\r\n\r\n  static get NAME() {\r\n    return NAME\r\n  }\r\n\r\n  // Public\r\n  set(progess) {\r\n    if (this._config.animate) {\r\n      this._bar.animate(progess)\r\n    } else {\r\n      this._bar.set(progess)\r\n    }\r\n  }\r\n\r\n  dispose() {\r\n    this._bar.destroy()\r\n\r\n    super.dispose()\r\n  }\r\n\r\n  // Private\r\n  _getConfig(config) {\r\n    config = {\r\n      ...Default,\r\n      ...{ step: this._getStepCallback() },\r\n      ...Manipulator.getDataAttributes(this._element),\r\n      ...(typeof config === 'object' ? config : {}),\r\n    }\r\n    //config.value = parseFloat(config.value)\r\n    return config\r\n  }\r\n\r\n  _getStepCallback() {\r\n    return (state, circle) => {\r\n      //circle.path.setAttribute('stroke', state.color)\r\n      //circle.path.setAttribute('stroke-width', state.width)\r\n\r\n      const value = Math.round(circle.value() * 100)\r\n      circle.setText(value + '%')\r\n      /*if (value === 0) {\r\n        circle.setText('')\r\n      } else {\r\n        circle.setText(value)\r\n      }*/\r\n    }\r\n  }\r\n\r\n  _init() {\r\n    this._bar = new ProgressBar.Circle(this._element, this._config)\r\n\r\n    if (this._config.value > 0) {\r\n      this.set(this._config.value)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * ------------------------------------------------------------------------\r\n * Data Api implementation\r\n * ------------------------------------------------------------------------\r\n */\r\n\r\nSelectorEngine.find(SELECTOR_DONUT).forEach((donut) => {\r\n  ProgressDonut.getOrCreateInstance(donut)\r\n})\r\n\r\nexport default ProgressDonut\r\n"],"names":[],"mappings":"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"}